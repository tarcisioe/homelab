version: "3"

services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    network_mode: host

    environment:
      TZ: "America/Sao_Paulo"
      WEBPASSWORD_FILE: "/run/secrets/webpassword"

    volumes:
      - "$SERVICE_DIR/etc/pihole:/etc/pihole"
      - "$SERVICE_DIR/etc/dnsmasq.d:/etc/dnsmasq.d"

    cap_add:
      - NET_ADMIN

    restart: unless-stopped

    secrets:
      - webpassword

secrets:
  webpassword:
    file: "./webpassword"
